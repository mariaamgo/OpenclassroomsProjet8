import{openModal}from './modal.js';import{projects}from './projects.js';const activeLink=function(){document.querySelectorAll('.menu > ul a').forEach(link=>{const nav=document.querySelector('.header');const navBottom=nav.getBoundingClientRect().bottom;const section=document.querySelector(link.getAttribute('href'));const sectionTop=section.getBoundingClientRect().top;const sectionBottom=section.getBoundingClientRect().bottom;if(sectionTop<=navBottom&&sectionBottom>=navBottom){link.classList.add('active')}else{link.classList.remove('active')}})}
const blackHeader=function(){const nav=document.querySelector('.nav');const spanMenu=document.querySelectorAll('.burger_menu span');if(window.scrollY>=1){nav.classList.add('header-black');spanMenu.forEach(span=>{span.style.borderColor='#a8a8a8'})}else{nav.classList.remove('header-black');spanMenu.forEach(span=>{span.style.borderColor='#000'})}}
const blackLink=function(){const links=document.querySelectorAll('.link a');const linkPosition=document.querySelector('.link').getBoundingClientRect().top;const presentationPosition=document.querySelector('.presentation').getBoundingClientRect().bottom;if(linkPosition>=presentationPosition){links.forEach(link=>{link.classList.add("blackLink")})}else{links.forEach(link=>{link.classList.remove("blackLink")})}}
window.addEventListener('scroll',function(){activeLink();blackHeader();blackLink()});const portfolio=function(projects){const gallery=document.querySelector(".section-gallery");gallery.innerHTML='';for(let i=0;i<projects.length;i++){image(gallery,projects,i)}
document.querySelectorAll('[class*="reveal-"]').forEach(function(r){observer.observe(r)})}
const image=function(gallery,projects,index){const project=`<a href="#modal" class="link-modal js-modal reveal-1" data-title="${projects[index].title}" aria-label="Ouvrir la fenÃªtre modale">
                            <div class="project-content">
                                <img src="${projects[index].cover}" alt="Mockup de page web du site de ${projects[index].title}" />
                                <div class="project-info">
                                    <h3>${projects[index].title}</h3>
                                </div>
                            </div>
                        </a>`;gallery.innerHTML+=project;document.querySelectorAll('.js-modal').forEach((a,index)=>{a.addEventListener('click',(e)=>openModal(e,projects,index))})}
let arrowUp=!0;const arrowButton=document.querySelector(".skills > img");const projectVisible=function(){const projectsHidden=document.querySelectorAll('.skill-hidden');if(arrowUp===!0){projectsHidden.forEach(project=>{project.classList.remove("hidden");arrowButton.classList.add("rotate");setTimeout(()=>{project.style.pointerEvents='auto';project.style.overflow='visible'},500)})}else{projectsHidden.forEach(project=>{project.classList.add("hidden");arrowButton.classList.remove("rotate");project.style.pointerEvents='none';project.style.overflow='hidden'})}
arrowUp=!arrowUp}
arrowButton.addEventListener("click",projectVisible);const ratio=.1;const options={root:null,rootMargin:"0px",threshold:ratio,};const handleIntersect=function(entries,observer){entries.forEach(function(entry){if(entry.intersectionRatio>ratio){entry.target.classList.add('reveal-visible')
observer.unobserve(entry.target)}})}
const observer=new IntersectionObserver(handleIntersect,options);document.querySelectorAll('.reveal').forEach(function(r){observer.observe(r)})
let click=!0;const openMenu=function(){const isMobile=window.innerWidth<=1024;const list=document.querySelector(".menu");if(isMobile){if(click===!0){list.style.transform="translateY(0)"}else{list.style.transform=`translateY(-250px)`}}
click=!click}
document.querySelector(".burger_menu").addEventListener("click",openMenu);document.querySelectorAll(".nav li").forEach(function(li){li.addEventListener("click",openMenu)});portfolio(projects)